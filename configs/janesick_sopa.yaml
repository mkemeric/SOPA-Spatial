# Janesick Breast Cancer â€” Sopa Pipeline Config
# Works with sopa's Snakemake workflow or CLI.
# Data: Janesick et al. (Nature Comms, 2023) FFPE Human Breast Cancer (IDC with DCIS)
# Source: https://github.com/10XGenomics/janesick_nature_comms_2023_companion
#
# Usage (Snakemake):
#   snakemake --configfile configs/janesick_sopa.yaml --config data_path=../data/outs/
#
# Usage (CLI):
#   sopa convert ../data/outs/ --sdata-path results/janesick.zarr --technology xenium
#   sopa segmentation cellpose results/janesick.zarr --diameter 35 --channels DAPI
#   sopa aggregate results/janesick.zarr --min-transcripts 10

read:
  technology: xenium

patchify:
  patch_width_pixel: 2048
  patch_overlap_pixel: 100

segmentation:
  cellpose:
    diameter: 35           # Breast cancer cells are ~30-40 pixels
    channels: ["DAPI"]
    flow_threshold: 2
    cellprob_threshold: -6
    model_type: cyto2
    min_area: 400

aggregate:
  aggregate_channels: true
  min_transcripts: 10      # Filter low-quality cells

# Scanpy preprocessing: normalization, HVG, UMAP, leiden
scanpy_preprocess:
  resolution: 1.0
  check_counts: false

explorer:
  ram_threshold_gb: 4
